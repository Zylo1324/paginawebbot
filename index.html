<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Zyl0</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <button type="button" id="sidebarLauncher" class="sidebar-launcher" aria-controls="sidebar" aria-label="Abrir navegaci√≥n" aria-expanded="false">‚ò∞</button>

  <aside class="sidebar" id="sidebar" data-pinned="false" aria-hidden="true">
    <div class="sidebar-content">
      <nav aria-label="Controles principales">
        <ul class="sidebar-list">
          <li>
            <div class="sidebar-search">
              <span class="sidebar-search-icon" aria-hidden="true">üîç</span>
              <label class="sr-only" for="q">Buscar</label>
              <input id="q" placeholder="Buscar por nombre, email o servicio‚Ä¶"/>
            </div>
          </li>
          <li>
            <label class="label" for="filterEstado">Estado</label>
            <select id="filterEstado">
              <option value="">Todos</option>
              <option value="vigente">Vigentes</option>
              <option value="pronto">Por vencer (‚â§7 d√≠as)</option>
              <option value="vencida">Vencidas</option>
            </select>
          </li>
          <li>
            <div class="menu-wrap theme-switcher">
              <button type="button" class="btn ghost theme-btn label" id="btnTheme" data-menu-toggle aria-haspopup="menu" aria-expanded="false">
                <span class="theme-btn-label label">Tema: <span id="themeLabel">Oscuro</span></span>
                <span class="theme-btn-icon" aria-hidden="true">‚ñæ</span>
              </button>
              <div class="menu" id="themeMenu" role="menu" aria-hidden="true">
                <button class="menu-item" type="button" role="menuitemradio" data-theme-option="dark" aria-checked="true">Oscuro</button>
                <button class="menu-item" type="button" role="menuitemradio" data-theme-option="light" aria-checked="false">Claro</button>
              </div>
            </div>
          </li>
          <li class="auth-controls">
            <button class="btn ghost label" id="btnAuthOpen">Acceder</button>
            <button class="btn ghost label" id="btnLogout" style="display:none">Cerrar sesi√≥n</button>
            <span id="userInfo" class="pill label" style="display:none"></span>
          </li>
          <li>
            <button class="btn ghost label" id="btnLinkedOpen">Correos enlazados</button>
          </li>
          <li>
            <button class="btn ghost label" id="btnChatOpen" title="Abrir chat con ChatGPT">ChatGPT</button>
          </li>
        </ul>
      </nav>
    </div>
  </aside>

  <header id="Header">
    <span class="pill">importante</span>
    <div class="hero-brand" role="heading" aria-level="1">
      <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%237dd3fc'/%3E%3Cstop offset='55%25' stop-color='%2316f2a6'/%3E%3Cstop offset='100%25' stop-color='%23f28a2d'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath fill='url(%23g)' d='M98.7 22.3C70.8 12.7 38.5 18.4 22.9 41.3 7.3 64.1 6.9 96 33 96c23.2 0 46.4-23.4 57.4-48.6 5.5-12.7 7.7-23.5 8.3-25.1Z'/%3E%3Cpath fill='none' stroke='rgba(255,255,255,0.6)' stroke-width='6' stroke-linecap='round' d='M36 74c16-8 36-28 47-50'/%3E%3C/svg%3E" alt="Hoja Super Zylo" loading="lazy"/>
      <span>Super Zylo</span>
    </div>
  </header>

  <section id="BarraServicio" class="center">
    <div class="label">Servicio</div>
    <select id="servicio" style="max-width:260px"></select>
    <button id="btnAgregarServicio" class="addserv" aria-label="Agregar servicio" title="Agregar servicio">+</button>
    <button id="btnEliminarServicio" class="addserv remove" aria-label="Eliminar servicio" title="Eliminar servicio">‚àí</button>
  </section>

  <main id="AppGrid">
    <section id="Formulario" class="form">
      <div class="form-grid">
        <div class="row">
          <label for="nombre">Nombre</label>
          <input id="nombre" placeholder="Escribe"/>
        </div>

        <!-- EMAIL con dropdown contextual por servicio -->
        <div class="row suggestion-source">
          <label for="email">Email</label>
          <input id="email" type="email" placeholder="ej: cliente@mail.com" aria-expanded="false" aria-controls="emailSuggestionDropdown" />
          <button class="email-toggle" id="emailDropdownToggle" type="button" aria-label="Mostrar correos guardados">‚ñæ</button>
          <div id="emailSuggestionDropdown" class="suggestion-dropdown" role="listbox" aria-hidden="true"></div>
        </div>

        <div class="row">
          <label for="telefono">Tel√©fono</label>
          <input id="telefono" placeholder="+51 ‚Ä¶"/>
        </div>
        <div class="row">
          <label for="inicio">Fecha</label>
          <input id="inicio" type="date" />
        </div>
        <div class="row">
          <label for="vence">Vence</label>
          <input id="vence" type="date" />
        </div>
        <div class="row">
          <label for="pin">PIN</label>
          <div class="pin-wrap">
            <input id="pin" type="password" inputmode="numeric" pattern="[0-9]*" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
            <button type="button" class="eye" id="togglePin" aria-label="Mostrar/ocultar PIN">üëÅ</button>
          </div>
        </div>
        <div class="row">
          <label for="categoria">Categor√≠a</label>
          <select id="categoria">
            <option value="">Selecciona una opci√≥n</option>
            <option>Premium</option>
            <option>Est√°ndar</option>
            <option>B√°sico</option>
          </select>
        </div>
        <div class="row span-2">
          <label for="notas">Notas</label>
          <textarea id="notas" placeholder="Plan, precio, usuario, etc."></textarea>
        </div>
      </div>
    </section>

    <aside id="AccionesRapidas" class="side-card">
      <h2>Acciones r√°pidas</h2>
      <p>Guarda el nuevo cliente o limpia el formulario antes de continuar.</p>
      <div class="actions">
        <button class="btn primary" id="btnGuardar">Agregar</button>
        <button class="btn ghost" id="btnLimpiar">Limpiar</button>
      </div>
      <div class="small" id="msg"></div>
    </aside>

    <!-- tabla -->
    <section id="TablaClientes" class="table-section">
      <div class="table-header">
        <h2 id="clientesTitulo">Clientes registrados</h2>
        <p>Consulta el listado completo y gestiona cada registro.</p>
      </div>
      <div class="table-card">
        <div class="table-scroll" role="region" aria-labelledby="clientesTitulo" tabindex="0">
          <table id="tabla">
            <thead>
              <tr>
                <th>Nombre</th><th>Email</th><th>Servicio</th>
                <th>Inicio</th><th>Vence</th><th>Estado</th><th>D√≠as</th><th><span class="sr-only">Acciones</span></th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <!-- ===== Modal Chat ChatGPT ===== -->
  <div id="chatModal" class="modal-backdrop" aria-hidden="true">
    <div class="modal chat-modal" role="dialog" aria-label="ChatGPT">
      <header>
        <strong>ChatGPT</strong>
        <div class="chat-header-actions">
          <button class="btn ghost" id="btnChatClear" type="button">Vaciar chat</button>
          <button class="btn ghost" id="btnChatClose" type="button">Cerrar</button>
        </div>
      </header>
      <div class="body">
        <div id="chatLog" class="chat-log"></div>
        <div class="composer">
          <textarea id="chatInput" placeholder="Escribe un mensaje‚Ä¶"></textarea>
          <button class="btn primary" id="btnSend">
            <span class="sr-only">Enviar</span>
            <span aria-hidden="true">‚Üë</span>
          </button>
        </div>
        <label class="small chat-share"><input type="checkbox" id="shareSecrets"> Compartir datos sensibles (PIN y notas)</label>
        <div class="small chat-note">Conexi√≥n directa a ChatGPT desde el navegador (API key expuesta).</div>
      </div>
    </div>
  </div>

  <!-- ===== Modal Acceso (login/registro en 1) ===== -->
  <div id="authModal" class="modal-backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-label="Acceder">
      <header>
        <strong>Acceder</strong>
        <button class="btn ghost" id="btnAuthClose">Cancelar</button>
      </header>
      <div class="body">
        <div class="row">
          <label for="authEmail">Correo</label>
          <input id="authEmail" type="email" placeholder="tucorreo@ejemplo.com" autocomplete="email">
        </div>
        <div class="row">
          <label for="authPass">Contrase√±a</label>
          <div class="pin-wrap">
            <input id="authPass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password">
            <button type="button" class="eye" id="toggleAuthPass" aria-label="Mostrar/ocultar contrase√±a">üëÅ</button>
          </div>
        </div>

        <div class="small" style="text-align:left;margin-top:0">
          <button id="btnForgot" class="linklike" type="button">¬øOlvidaste tu contrase√±a?</button>
        </div>

        <div class="actions" style="justify-content:flex-end">
          <button class="btn primary" id="btnAuthSubmit">Continuar</button>
        </div>
        <div class="small" id="authHelp">Si es tu primera vez, crearemos tu cuenta autom√°ticamente.</div>
        <div class="small" id="authError" style="color:var(--danger)"></div>
      </div>
    </div>
  </div>

  <!-- ===== Modal Correos enlazados ===== -->
  <div id="linkedModal" class="modal-backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-label="Correos enlazados">
      <header>
        <strong>Correos enlazados</strong>
        <button class="btn ghost" id="btnLinkedHeaderClose" type="button">Cancelar</button>
      </header>
      <div class="body">
        <div class="row">
          <label for="linkedService">Servicio</label>
          <select id="linkedService"></select>
        </div>
        <div class="row suggestion-source">
          <label for="linkedEmail">Correo</label>
          <input id="linkedEmail" type="email" placeholder="correo@ejemplo.com" autocomplete="off" aria-expanded="false" aria-controls="linkedEmailDropdown">
          <button class="email-toggle" id="linkedEmailDropdownToggle" type="button" aria-label="Mostrar correos guardados">‚ñæ</button>
          <div id="linkedEmailDropdown" class="suggestion-dropdown" role="listbox" aria-hidden="true"></div>
        </div>
        <div class="row">
          <label for="linkedPassword">Contrase√±a</label>
          <div class="pin-wrap">
            <input id="linkedPassword" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="off">
            <button type="button" class="eye" id="toggleLinkedPassword" aria-label="Mostrar/ocultar contrase√±a">üëÅ</button>
          </div>
        </div>
        <div class="small" id="linkedError" style="color:var(--danger)"></div>
        <div class="actions" style="justify-content:flex-end">
          <button class="btn ghost" id="btnLinkedDelete" type="button" aria-label="Eliminar correo enlazado">Eliminar</button>
          <button class="btn primary" id="btnLinkedSave" type="button">Guardar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Supabase JS -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.js"></script>


  <script src="app.js" defer></script>
</body>
</html>
